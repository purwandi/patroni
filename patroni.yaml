name: "database-01"
scope: gitlab
namespace: /devops/
consul:
  url: http://127.0.0.1:8500
  register_service: true
postgresql:
  connect_address: "localhost:5432"
  bin_dir: /usr/pgsql-15/bin/
  data_dir: /data/postgresql/15/data
  listen: "*:5432"
  authentication:
    replication:
      username: replicator
      password: M5dmSVaMYxeHF5JJLv9CPzq293R5z82O
      sslmode: disable
restapi:
  connect_address: "database-01:8008"
  listen: "database-01:8008"
bootstrap:
  dcs:
    ttl: 30
    loop_wait: 10
    retry_timeout: 10
    maximum_lag_on_failover: 1048576
    postgresql:
      parameters:
        max_connections: 500
  users:
    app_user:
      password: "Sw0bu2JR6gc000hSfctv0eDLyHF3odAL"

  pg_hba:
    # "local" is for Unix domain socket connections only
    - local    all       all           peer

    # IPv4 local connections:
    - host    all         all         127.0.0.1/32    scram-sha-256
    - host    all         all         0.0.0.0/0       scram-sha-256

    # Allow replication connections from localhost, by a user with the
    # replication privilege.
    - local   replication all                         peer
    - host    replication replicator  127.0.0.1/32    trust
    - host    replication replicator  10.0.0.21/32    trust
    - host    replication replicator  10.0.0.22/32    trust

  initdb:
    - encoding: UTF8